{
  "extracted_at": "2025-10-13T21:21:39.957Z",
  "total_views": 2,
  "views": [
    {
      "name": "view_caixa_itens",
      "original_sql": "CREATE view [dbo].[view_caixa_itens] as \r\nselect a.idItem, a.idCaixa, a.nomeItem, a.corHexa, a.imagem, a.valor, a.valorIntangivel, a.odd, a.liberadoApartirDe, a.createdAt, a.updatedAt, a.deletedAt, a.ordenacao, a.valorVenda, a.idProduto, \r\nb.altura,\r\nb.largura,\r\nb.comprimento,\r\nb.pesoGramas,\r\nb.valorCompra,\r\nb.descricao,\r\nb.sku,\r\nb.ncm,\r\nb.cst,\r\nb.cfop,\r\nb.jsonFacilitadorImpostos,\r\nb.variacoes,\r\nc.idBling as idProdutoBling,\r\nb.estoque\r\n from CaixasItens a \r\ninner join Produtos b on a.idProduto = b.idProduto\r\nleft join (\r\n    select a.idProduto, idBling from Produtos_Bling_vinculo a \r\n    inner join Produtos b on a.idProduto = b.idProduto\r\n    inner join Empresas_Bling c on b.idEmpresa = c.idEmpresa and a.idEmpresaBling = c.idEmpresaBling\r\n    where c.deletedAt is null\r\n)c on a.idProduto = c.idProduto\r\n\r\n",
      "mysql_sql": "CREATE view `view_caixa_itens` as \r\nselect a.idItem, a.idCaixa, a.nomeItem, a.corHexa, a.imagem, a.valor, a.valorIntangivel, a.odd, a.liberadoApartirDe, a.createdAt, a.updatedAt, a.deletedAt, a.ordenacao, a.valorVenda, a.idProduto, \r\nb.altura,\r\nb.largura,\r\nb.comprimento,\r\nb.pesoGramas,\r\nb.valorCompra,\r\nb.descricao,\r\nb.sku,\r\nb.ncm,\r\nb.cst,\r\nb.cfop,\r\nb.jsonFacilitadorImpostos,\r\nb.variacoes,\r\nc.idBling as idProdutoBling,\r\nb.estoque\r\n from CaixasItens a \r\ninner join Produtos b on a.idProduto = b.idProduto\r\nleft join (\r\n    select a.idProduto, idBling from Produtos_Bling_vinculo a \r\n    inner join Produtos b on a.idProduto = b.idProduto\r\n    inner join Empresas_Bling c on b.idEmpresa = c.idEmpresa and a.idEmpresaBling = c.idEmpresaBling\r\n    where c.deletedAt is null\r\n)c on a.idProduto = c.idProduto",
      "notes": "Média - Pode precisar ajustes"
    },
    {
      "name": "view_encomendas",
      "original_sql": "\r\nCREATE View [dbo].[view_encomendas] as \r\n\r\n\r\nselect distinct a.idEncomenda, d.idEmpresa,  d.nomeEmpresa, a.chave, a.idUsuario, a.valorFrete, a.idStatus, a.observacao, a.createdAt, a.idUsuarioFrete, a.codigoRastreio,\r\nb.nome, b.cpf, b.email, b.celular, b.endereco, b.numero, b.complemento, b.bairro, b.cidade, b.estado,b.cep,\r\nc.nomeStatus, (\r\n  select b1.idItem, count(idEncomendaItem) as qtd,  b1.nomeItem, b1.imagem, b1.valor, b1.altura, b1.largura, b1.comprimento, b1.pesoGramas, c1.nomeCaixa, b1.sku, a1.variacoesSelecionadas, b1.idProdutoBling, b1.variacoes from UsuariosEncomendasItens a1\r\n  inner join view_caixa_itens b1 on a1.idItem = b1.idItem\r\n  inner join caixas c1 on b1.idCaixa = c1.idCaixa\r\n  where a.idEncomenda = a1.idEncomenda\r\n  group by b1.idItem, b1.nomeItem, b1.imagem, b1.valor, b1.altura, b1.largura, b1.comprimento, b1.pesoGramas, c1.nomeCaixa, b1.sku, a1.variacoesSelecionadas, b1.idProdutoBling, b1.variacoes \r\n  FOR JSON PATH\r\n) as itens,\r\n(\r\n  select a2.*, b2.nome from UsuariosEncomendasRelacionamento a2 \r\n  inner join Usuarios b2 on a2.idUsuario = b2.idUsuario\r\n  where a.idEncomenda = a2.idEncomenda\r\n  FOR JSON PATH\r\n) as relacionamentos,\r\n(\r\n  select b3.* from UsuariosEncomendasTags a3\r\n  inner join DOM_TagsEncomenda b3 on a3.idTag = b3.idTag\r\n  where a.idEncomenda = a3.idEncomenda\r\n  FOR JSON PATH\r\n) as tags,\r\ne.valorPix,\r\nf.idBling as idUsuarioBling,\r\ng.idBling as idPedidoBling,\r\na.integradoBling,\r\na.sincronizandoBling,\r\nb.integradoBling as usuarioIntegradoBling\r\nfrom UsuariosEncomendas a \r\ninner join usuarios b on a.idUsuario = b.idUsuario\r\ninner join DOM_StatusEncomendas c on a.idStatus = c.idStatus\r\nleft join empresas d on b.idEmpresa = d.idEmpresa\r\nleft join (\r\n    select idUsuario, sum(valor) as valorPix from registros_Financeiros where idstatus = 5 group by idUsuario\r\n) e on a.idUsuario = e.idUsuario\r\nleft join (\r\n    select u.idUsuario, ubu.idBling from usuarios u \r\n    inner join Usuarios_Bling_vinculo ubu on u.idUsuario = ubu.idUsuario\r\n    inner join Empresas_Bling eb on eb.idEmpresaBling = ubu.idEmpresaBling and eb.idEmpresa = u.idEmpresa\r\n    where eb.deletedAt is null \r\n) f on a.idUsuario = f.idUsuario\r\nleft join (\r\n    select ue.idEncomenda, ebu.idBling from usuarios u \r\n    inner join UsuariosEncomendas ue on u.idUsuario = ue.idUsuario\r\n    inner join Encomendas_Bling_vinculo ebu on ue.idEncomenda = ebu.idEncomenda\r\n    inner join Empresas_Bling eb on eb.idEmpresaBling = ebu.idEmpresaBling and eb.idEmpresa = u.idEmpresa\r\n    where eb.deletedAt is null and ebu.deletedAt is null \r\n) g on a.idEncomenda = g.idEncomenda\r\n\r\n\r\n",
      "mysql_sql": "CREATE View `view_encomendas` as \r\n\r\n\r\nselect distinct a.idEncomenda, d.idEmpresa,  d.nomeEmpresa, a.chave, a.idUsuario, a.valorFrete, a.idStatus, a.observacao, a.createdAt, a.idUsuarioFrete, a.codigoRastreio,\r\nb.nome, b.cpf, b.email, b.celular, b.endereco, b.numero, b.complemento, b.bairro, b.cidade, b.estado,b.cep,\r\nc.nomeStatus, (\r\n  select b1.idItem, count(idEncomendaItem) as qtd,  b1.nomeItem, b1.imagem, b1.valor, b1.altura, b1.largura, b1.comprimento, b1.pesoGramas, c1.nomeCaixa, b1.sku, a1.variacoesSelecionadas, b1.idProdutoBling, b1.variacoes from UsuariosEncomendasItens a1\r\n  inner join view_caixa_itens b1 on a1.idItem = b1.idItem\r\n  inner join caixas c1 on b1.idCaixa = c1.idCaixa\r\n  where a.idEncomenda = a1.idEncomenda\r\n  group by b1.idItem, b1.nomeItem, b1.imagem, b1.valor, b1.altura, b1.largura, b1.comprimento, b1.pesoGramas, c1.nomeCaixa, b1.sku, a1.variacoesSelecionadas, b1.idProdutoBling, b1.variacoes \r\n  FOR JSON PATH\r\n) as itens,\r\n(\r\n  select a2.*, b2.nome from UsuariosEncomendasRelacionamento a2 \r\n  inner join Usuarios b2 on a2.idUsuario = b2.idUsuario\r\n  where a.idEncomenda = a2.idEncomenda\r\n  FOR JSON PATH\r\n) as relacionamentos,\r\n(\r\n  select b3.* from UsuariosEncomendasTags a3\r\n  inner join DOM_TagsEncomenda b3 on a3.idTag = b3.idTag\r\n  where a.idEncomenda = a3.idEncomenda\r\n  FOR JSON PATH\r\n) as tags,\r\ne.valorPix,\r\nf.idBling as idUsuarioBling,\r\ng.idBling as idPedidoBling,\r\na.integradoBling,\r\na.sincronizandoBling,\r\nb.integradoBling as usuarioIntegradoBling\r\nfrom UsuariosEncomendas a \r\ninner join usuarios b on a.idUsuario = b.idUsuario\r\ninner join DOM_StatusEncomendas c on a.idStatus = c.idStatus\r\nleft join empresas d on b.idEmpresa = d.idEmpresa\r\nleft join (\r\n    select idUsuario, sum(valor) as valorPix from registros_Financeiros where idstatus = 5 group by idUsuario\r\n) e on a.idUsuario = e.idUsuario\r\nleft join (\r\n    select u.idUsuario, ubu.idBling from usuarios u \r\n    inner join Usuarios_Bling_vinculo ubu on u.idUsuario = ubu.idUsuario\r\n    inner join Empresas_Bling eb on eb.idEmpresaBling = ubu.idEmpresaBling and eb.idEmpresa = u.idEmpresa\r\n    where eb.deletedAt is null \r\n) f on a.idUsuario = f.idUsuario\r\nleft join (\r\n    select ue.idEncomenda, ebu.idBling from usuarios u \r\n    inner join UsuariosEncomendas ue on u.idUsuario = ue.idUsuario\r\n    inner join Encomendas_Bling_vinculo ebu on ue.idEncomenda = ebu.idEncomenda\r\n    inner join Empresas_Bling eb on eb.idEmpresaBling = ebu.idEmpresaBling and eb.idEmpresa = u.idEmpresa\r\n    where eb.deletedAt is null and ebu.deletedAt is null \r\n) g on a.idEncomenda = g.idEncomenda",
      "notes": "Média - Pode precisar ajustes"
    }
  ]
}